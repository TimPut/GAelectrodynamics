%
% Copyright Â© 2017 Peeter Joot.  All Rights Reserved.
% Licenced as described in the file LICENSE under the root directory of this GIT repository.
%
\index{curvilinear coordinates}
\paragraph{Rough idea:}
Curvilinear coordinates can be defined for any subspace spanned by a parameterized vector into that space.
Consider a continuous subspace parameterized by a two parameter vector function \( \Bx = \Bx(u_1, u_2) \) that is differentiable with respect to either parameter

\begin{dmath}\label{eqn:curvilinearDefined:40}
\begin{aligned}
d\Bx_{u_1} &= \PD{u}{\Bx} du_1 \\
d\Bx_{u_2} &= \PD{v}{\Bx} du_2,
\end{aligned}
\end{dmath}

At the point of evaluation, the span of these differentials or the partials themselves, is called the tangent space.
We will utilize the partials as a basis for the tangent space

\begin{dmath}\label{eqn:curvilinearDefined:80}
\begin{aligned}
\Bx_{u_1} &= \PD{u_1}{\Bx} \\
\Bx_{u_2} &= \PD{u_2}{\Bx}.
\end{aligned}
\end{dmath}

There is no reason to presume that there is any orthonormality constraint on the basis \( \setlr{ \Bx_{u_1}, \Bx_{u_2} } \) for this two parameter subspace, so a reciprocal basis \( \setlr{ \Bx^u, \Bx^v } \)
must be used to compute coordinates, however,
we must restrict attention to only those parametrizations for which the tangent space volume element is non-zero

\begin{dmath}\label{eqn:curvilinearDefined:60}
d\Bx_{u_1} \wedge d\Bx_{u_2} \ne 0.
\end{dmath}

\makeexample{A two parameter surface.}{example:curvilinearDefined:420}{
As an illustration, consider a two parameter subspace of \R{3}

\begin{dmath}\label{eqn:curvilinearDefined:440}
\Bx(u_1, u_2)
=
u_1 \Be_1 + u_2 \Be_2 + \lr{(u_1 - 2 u_2)^2 + \cos(u_2) \sin(5 u_1 + u_2)} \Be_3.
\end{dmath}

The tangent space associated with this parameterization is spanned by the vectors

\begin{dmath}\label{eqn:curvilinearDefined:460}
\begin{aligned}
\Bx_{u_1}
&=
\Be_1 + \lr{
   2 (u_1 - 2 u_2) + 5 \cos(u_2) \cos(5 u_1 + u_2)
} \Be_3 \\
\Bx_{u_2}
&=
\Be_2 +
\lr{
   -4 (u_1 - 2 u_2)
- \sin(u_2) \sin(5 u_1 + u_2)
+ \cos(u_2) \cos(5 u_1 + u_2)
} \Be_3.
\end{aligned}
\end{dmath}

This tangent space is plotted in \cref{fig:twoParameterDifferentialField:twoParameterDifferentialFieldFig1}.

FIXME: Wolfgang: ``Plot the TpM at special point \( P(0.3,1.5,0.3) \) in Fig.  Calculate using hand and CAS MM.''
} % example

\imageFigure{../figures/GAelectrodynamics/twoParameterDifferentialFieldFig1}{Curvilinear coordinates along a two parameter surface.}{fig:twoParameterDifferentialField:twoParameterDifferentialFieldFig1}{0.3}

\paragraph{General definition}

More generally, given a parameterization of \( \Bx(u_1, u_2, \cdots, u_k) \), a curvilinear basis defined on the tangent space is induced by the partials

\begin{dmath}\label{eqn:curvilinearDefined:240}
\Bx_{u_i} = \PD{u_i}{\Bx}.
\end{dmath}

The volume element for the subspace is

\begin{dmath}\label{eqn:curvilinearDefined:260}
d^k \Bx = du_1 du_2 \cdots du_k\,
\Bx_{u_1} \wedge
\Bx_{u_2} \wedge \cdots \wedge
\Bx_{u_k}.
\end{dmath}

Unlike a scalar volume, this volume element is oriented.
Any multivector can be expressed in terms of the curvilinear basis \( \setlr{ \Bx_{u_1}, \Bx_{u_2}, \cdots, \Bx_k} \), but computation of the curvilinear coordinates requires the reciprocal basis.

For example, a vector \( \Bf \) constrained to the tangent space admits a representation

\begin{dmath}\label{eqn:curvilinearDefined:380}
\Bf = \sum_i a_i \Bx_{u_i}.
\end{dmath}

Dotting with \( \Bx^{u_j} \) gives

\begin{dmath}\label{eqn:curvilinearDefined:280}
\Bf \cdot \Bx^{u_j}
= \sum_i a_i \Bx_{u_i} \cdot \Bx^{u_j}
= \sum_i a_i {\delta^i}_j
= a_j,
\end{dmath}

so
\begin{dmath}\label{eqn:curvilinearDefined:300}
\Bf = \sum_i \lr{ \Bf \cdot \Bx^{u_i} } \Bx_{u_i}.
\end{dmath}

Higher grade multivector objects may also be represented in curvilinear coordinates.
For example, given a bivector constrained to the tangent space

\begin{dmath}\label{eqn:curvilinearDefined:320}
B = \inv{2} \sum_{i, j} b_{ij} \Bx_{u_i} \wedge \Bx_{u_j},
\end{dmath}

the coordinates \( b_{ij} \) can be determined by dotting \( B \) with \( \Bx^{u_j} \wedge \Bx^{u_i} \), yielding

\begin{dmath}\label{eqn:curvilinearDefined:340}
B \cdot \lr{ \Bx^{u_j} \wedge \Bx^{u_i} }
=
\inv{2} \sum_{r, s} b_{rs} \lr{ \Bx_{u_r} \wedge \Bx_{u_s} } \cdot \lr{ \Bx^{u_j} \wedge \Bx^{u_i} }
=
\inv{2} \sum_{r, s} b_{rs} \lr{ \lr{ \Bx_{u_r} \wedge \Bx_{u_s} } \cdot \Bx^{u_j} } \cdot \Bx^{u_i}
=
\inv{2} \sum_{r, s} b_{rs} \lr{ \Bx_{u_r} {\delta_s}^j - \Bx_{u_s} {\delta_r}^j } \cdot \Bx^{u_i}
=
\inv{2} \sum_{r, s} b_{rs} \lr{ {\delta_r}^i {\delta_s}^j - {\delta_s}^i {\delta_r}^j }
=
\inv{2} \lr{ b_{i j} - b_{ji} }.
\end{dmath}

When \( i \ne j \) this is \( b_{ij} \) and is zero otherwise.
The curvilinear representation of the bivector is therefore

\begin{dmath}\label{eqn:curvilinearDefined:400}
B = \sum_{i < j} \lr{ B \cdot \lr{ \Bx^{u_j} \wedge \Bx^{u_i} }} \Bx_{u_i} \wedge \Bx_{u_j}.
\end{dmath}

